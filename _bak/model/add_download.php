<?php        header("Content-Type:text/html;charset=utf-8");     include("connect.php");      $max_file_size = 20000000;    $destination_folder = '../attachments/file/upload/';    if ($_SERVER['REQUEST_METHOD'] == 'POST') {        $info = '';        $name = null;        if (is_uploaded_file($_FILES['path']['tmp_name'])) {            $upfile = $_FILES['path'];                  $file_info = pathinfo($_FILES["path"]["name"]);            $ext = $file_info ['extension'];            $name = time().'.'.$ext;                              $oriName = $_FILES["path"]["name"];            $type = $upfile['type'];             $size = $upfile['size'];            $tmp_name = $upfile['tmp_name'];            $name;            $error = $upfile['error'];            if($max_file_size<$size) {                $info='上传文件太大！不能上传！';            }             $type = trim(substr($type,6,12));            if ($info == '') {                //echo $destination_folder.$name.'.'.$type;                if (move_uploaded_file($_FILES['path']['tmp_name'], $destination_folder.$name)) {                    $info='上传文件成功！';                    $name = $destination_folder.$name;                    $path = str_replace("..", "./background", $name);                } else {                    $name=null;                }            }                    }         $sql="insert into download(name,path) values('$_POST[name]', '$path')";          echo $sql;        mysql_query($sql);        $flag = mysql_affected_rows();        if($flag == 1){            echo "<script>alert('添加成功！');window.location.href='../view/add_download.php';</script>";        } else {            unlink($name);            echo "<script>alert('添加失败！');window.location.href='../view/add_download.php';</script>";        }    }?>